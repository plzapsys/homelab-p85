
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../cilium-bgp-control-plane/">
      
      
        <link rel="next" href="../unifi/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.0.6">
    
    
      
        <title>Manual setup - Pando85's Homelab</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.558e4712.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.2505c338.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#manual-setup" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Pando85&#39;s Homelab" class="md-header__button md-logo" aria-label="Pando85's Homelab" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Pando85's Homelab
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Manual setup <!-- omit from toc -->
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/pando85/homelab" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Pando85&#39;s Homelab" class="md-nav__button md-logo" aria-label="Pando85's Homelab" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Pando85's Homelab
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/pando85/homelab" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2" tabindex="0" aria-expanded="false">
          Network
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Network" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Network
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../network/configuration/" class="md-nav__link">
        Configuration
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3" tabindex="0" aria-expanded="true">
          Deployment
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Deployment" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Deployment
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cilium-bgp-control-plane/" class="md-nav__link">
        Cilium BPG control plane
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Manual setup <!-- omit from toc -->
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Manual setup <!-- omit from toc -->
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#network" class="md-nav__link">
    Network
  </a>
  
    <nav class="md-nav" aria-label="Network">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pfsense" class="md-nav__link">
    Pfsense
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#servers" class="md-nav__link">
    Servers
  </a>
  
    <nav class="md-nav" aria-label="Servers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flash-sds" class="md-nav__link">
    Flash SDs
  </a>
  
    <nav class="md-nav" aria-label="Flash SDs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#amd64-instances" class="md-nav__link">
    amd64 instances
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#odroid-hc4" class="md-nav__link">
    odroid-hc4
  </a>
  
    <nav class="md-nav" aria-label="odroid-hc4">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bootloader-bypass-method" class="md-nav__link">
    Bootloader Bypass Method
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#naming-convention" class="md-nav__link">
    Naming convention
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    Troubleshooting
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#same-mac-problem" class="md-nav__link">
    Same mac problem
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#no-python-interpreter-found" class="md-nav__link">
    No python interpreter found
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setup" class="md-nav__link">
    Setup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stability-problems-currently-included-400mhz" class="md-nav__link">
    Stability problems (currently included 400MHz)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cluster" class="md-nav__link">
    Cluster
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../unifi/" class="md-nav__link">
        UniFi
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4" tabindex="0" aria-expanded="false">
          User-guide
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="User-guide" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          User-guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/add-or-remove-nodes/" class="md-nav__link">
        Add or remove nodes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/clone-data/" class="md-nav__link">
        Clone data between volumes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/expand-longhorn-volume/" class="md-nav__link">
        Expand Longhorn volume
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/freshrss/" class="md-nav__link">
        FreshRSS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/grigri/" class="md-nav__link">
        grigri
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/import_zfs_dataset/" class="md-nav__link">
        Import ZFS dataset
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/install-pre-commit-hooks/" class="md-nav__link">
        Install pre-commit hooks
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/kanidm/" class="md-nav__link">
        Kanidm
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/kubernetes-upgrade/" class="md-nav__link">
        Kubernetes upgrade
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/ldap/" class="md-nav__link">
        LDAP
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/migrate_controller_node/" class="md-nav__link">
        Migrate controller node
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/nextcloud/" class="md-nav__link">
        Nextcloud <!-- omit from toc -->
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/restore-backup/" class="md-nav__link">
        Restore backup
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/run-commands-on-multiple-nodes/" class="md-nav__link">
        Run commands on multiple nodes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/upgrades/" class="md-nav__link">
        Upgrades
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/valetudo-upgrade/" class="md-nav__link">
        Valetudo upgrade
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/wallabag/" class="md-nav__link">
        Wallabag
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/wan-phone-failover/" class="md-nav__link">
        WAN phone failover
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_5" tabindex="0" aria-expanded="false">
          Troubleshooting
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Troubleshooting" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Troubleshooting
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../troubleshooting/major-page-faults/" class="md-nav__link">
        Major page faults
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../troubleshooting/mqtt/" class="md-nav__link">
        MQTT
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#network" class="md-nav__link">
    Network
  </a>
  
    <nav class="md-nav" aria-label="Network">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pfsense" class="md-nav__link">
    Pfsense
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#servers" class="md-nav__link">
    Servers
  </a>
  
    <nav class="md-nav" aria-label="Servers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flash-sds" class="md-nav__link">
    Flash SDs
  </a>
  
    <nav class="md-nav" aria-label="Flash SDs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#amd64-instances" class="md-nav__link">
    amd64 instances
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#odroid-hc4" class="md-nav__link">
    odroid-hc4
  </a>
  
    <nav class="md-nav" aria-label="odroid-hc4">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bootloader-bypass-method" class="md-nav__link">
    Bootloader Bypass Method
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#naming-convention" class="md-nav__link">
    Naming convention
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    Troubleshooting
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#same-mac-problem" class="md-nav__link">
    Same mac problem
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#no-python-interpreter-found" class="md-nav__link">
    No python interpreter found
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setup" class="md-nav__link">
    Setup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stability-problems-currently-included-400mhz" class="md-nav__link">
    Stability problems (currently included 400MHz)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cluster" class="md-nav__link">
    Cluster
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  



<h1 id="manual-setup">Manual setup <!-- omit from toc --></h1>
<ul>
<li><a href="#network">Network</a></li>
<li><a href="#pfsense">Pfsense</a></li>
<li><a href="#servers">Servers</a></li>
<li><a href="#flash-sds">Flash SDs</a><ul>
<li><a href="#amd64-instances">amd64 instances</a></li>
<li><a href="#odroid-hc4">odroid-hc4</a></li>
<li><a href="#bootloader-bypass-method">Bootloader Bypass Method</a></li>
<li><a href="#naming-convention">Naming convention</a></li>
</ul>
</li>
<li><a href="#troubleshooting">Troubleshooting</a><ul>
<li><a href="#same-mac-problem">Same mac problem</a></li>
<li><a href="#no-python-interpreter-found">No python interpreter found</a></li>
</ul>
</li>
<li><a href="#setup">Setup</a></li>
<li><a href="#stability-problems-currently-included-400mhz">Stability problems (currently included 400MHz)</a></li>
<li><a href="#cluster">Cluster</a></li>
</ul>
<h2 id="network">Network</h2>
<h3 id="pfsense">Pfsense</h3>
<ul>
<li>Connect to DMZ <code>192.168.192.0/24</code></li>
<li>Add DHCP server: range(60-99), but fix agent IPs before add to the cluster.</li>
<li><em>only for controller HA</em> - Create lb for apiserver (used HaProxy: increase client, server and
  tunnel* timeouts to 86400000)</li>
<li>Add DNS entry</li>
</ul>
<p><strong>tunnel*</strong>: must be added in <code>backend-&gt;advanced settings-&gt;backend pass thru</code> as
<code>timeout tunnel 86400s</code></p>
<h2 id="servers">Servers</h2>
<h3 id="flash-sds">Flash SDs</h3>
<ul>
<li>odroid-c4: <a href="https://www.armbian.com/odroid-c4/">image</a></li>
<li>odroid-hc4: <a href="https://www.armbian.com/odroid-hc4/">image</a></li>
<li>amd64: <a href="https://releases.ubuntu.com/22.04/">usb-stick</a></li>
<li>grigri: <a href="https://releases.ubuntu.com/22.04/">usb-stick</a></li>
<li>prusik-ipmi: <a href="https://files.pikvm.org/images/v4plus-hdmi-rpi4-latest.img.xz">image</a></li>
</ul>
<p>Use script from <code>scripts/prepare_sdcard.sh</code> to prepare instances. amd64 and grigri should be
installed manually.</p>
<h4 id="amd64-instances">amd64 instances</h4>
<p>Installed with Ubuntu: select ubuntu server (<strong>non minimized</strong>) and follow the process.</p>
<h4 id="odroid-hc4">odroid-hc4</h4>
<p><strong>Important</strong>: To be able to boot clean Armbian mainline based u-boot / kernel experiences, you need
to remove incompatible Petitboot loader that is shipped with the board.</p>
<h5 id="bootloader-bypass-method">Bootloader Bypass Method</h5>
<p>This is now the preferred method. It is easier, and be performed without a display via SSH</p>
<blockquote>
<p>Install an SD Card with a fresh Armbian image Flip device upside down With a tool, press and hold
down the black button. Continue holding button and plug in power to device Login to console or SSH
and perform follow normal setup procedures Verify system can access SPI FLASH device and Erase
Reboot</p>
</blockquote>
<div class="highlight"><pre><span></span><code>odroidhc4:~:#<span class="w"> </span>ls<span class="w"> </span>-ltr<span class="w"> </span>/dev/mtd*
crw-------<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">90</span>,<span class="w"> </span><span class="m">0</span><span class="w"> </span>Nov<span class="w">  </span><span class="m">6</span><span class="w"> </span><span class="m">21</span>:38<span class="w"> </span>/dev/mtd0
brw-rw----<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>disk<span class="w"> </span><span class="m">31</span>,<span class="w"> </span><span class="m">0</span><span class="w"> </span>Nov<span class="w">  </span><span class="m">6</span><span class="w"> </span><span class="m">21</span>:38<span class="w"> </span>/dev/mtdblock0
crw-------<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">90</span>,<span class="w"> </span><span class="m">1</span><span class="w"> </span>Nov<span class="w">  </span><span class="m">6</span><span class="w"> </span><span class="m">21</span>:38<span class="w"> </span>/dev/mtd0ro
odroidhc4:~:#<span class="w"> </span>flash_erase<span class="w"> </span>/dev/mtd0<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>
Erasing<span class="w"> </span><span class="m">4</span><span class="w"> </span>Kibyte<span class="w"> </span>@<span class="w"> </span>fff000<span class="w"> </span>--<span class="w"> </span><span class="m">100</span><span class="w"> </span>%<span class="w"> </span><span class="nb">complete</span>
odroidhc4:~:#
</code></pre></div>
<h4 id="naming-convention">Naming convention</h4>
<p>All nodes must be named with prefix <code>k8s-{hardware_tag}-{numerical_id}</code>. For example:</p>
<ul>
<li>k8s-odroid-c4-1</li>
<li>k8s-amd64-1</li>
</ul>
<p>Also, consider their use case and performance profile. For example, for Ceph nodes:</p>
<ul>
<li>k8s-sas-ssd-1</li>
<li>k8s-hot-storage-2</li>
</ul>
<h3 id="troubleshooting">Troubleshooting</h3>
<h4 id="same-mac-problem">Same mac problem</h4>
<p>Editing <code>/boot/ArmbianEnv.txt</code> didn't work.</p>
<p><code>/etc/network/interfaces</code>:</p>
<div class="highlight"><pre><span></span><code>...
auto eth0
iface eth0 inet dhcp
  hwaddress ether b6:09:a4:06:00:8b
</code></pre></div>
<h4 id="no-python-interpreter-found">No python interpreter found</h4>
<div class="highlight"><pre><span></span><code>ln<span class="w"> </span>-s<span class="w"> </span>/usr/bin/python3<span class="w"> </span>/usr/bin/python
</code></pre></div>
<h3 id="setup">Setup</h3>
<p>Use playbook <code>playbooks/install/so.yml</code> to setup servers.</p>
<div class="highlight"><pre><span></span><code>make<span class="w"> </span>first-boot
</code></pre></div>
<p><strong>Note</strong>: Armbian default user/password -&gt; root/1234</p>
<h3 id="stability-problems-currently-included-400mhz">Stability problems (currently included 400MHz)</h3>
<p>Change uboot to use ddr 333 MHz frequency.</p>
<p>Compile uboot binaries or download from <a href="https://nextcloud.grigri.cloud/f/451602">here</a></p>
<div class="highlight"><pre><span></span><code>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/armbian/build.git
<span class="nb">cd</span><span class="w"> </span>build
<span class="c1"># edit `config/sources/families/include/rockchip64_common.inc` with this values for rock64:</span>
<span class="c1">#      BOOT_USE_BLOBS=yes</span>
<span class="c1">#      BOOT_SOC=rk3328</span>
<span class="c1">#      DDR_BLOB=&#39;rk33/rk3328_ddr_333MHz_v1.16.bin&#39;</span>
<span class="c1">#      MINILOADER_BLOB=&#39;rk33/rk322xh_miniloader_v2.50.bin&#39;</span>
<span class="c1">#      BL31_BLOB=&#39;rk33/rk322xh_bl31_v1.44.elf&#39;</span>

./compile.sh<span class="w"> </span>docker
<span class="c1"># switch to expert (to see rock64) and compile u-boot for rock64</span>
docker<span class="w"> </span>cp<span class="w"> </span><span class="nv">$CONTAINER_ID</span>:/root/armbian/cache/sources/u-boot/v2020.10/uboot.img<span class="w"> </span>.
docker<span class="w"> </span>cp<span class="w"> </span><span class="nv">$CONTAINER_ID</span>:/root/armbian/cache/sources/u-boot/v2020.10/idbloader.bin<span class="w"> </span>.
docker<span class="w"> </span>cp<span class="w"> </span><span class="nv">$CONTAINER_ID</span>:/root/armbian/cache/sources/u-boot/v2020.10/trust.bin<span class="w"> </span>.
</code></pre></div>
<p>Then, in rock64 SD card:</p>
<div class="highlight"><pre><span></span><code>dd<span class="w"> </span><span class="k">if</span><span class="o">=</span>idbloader.bin<span class="w"> </span><span class="nv">of</span><span class="o">=</span>/dev/mmcblk0<span class="w"> </span><span class="nv">seek</span><span class="o">=</span><span class="m">64</span><span class="w"> </span><span class="nv">conv</span><span class="o">=</span>notrunc
dd<span class="w"> </span><span class="k">if</span><span class="o">=</span>uboot.img<span class="w"> </span><span class="nv">of</span><span class="o">=</span>/dev/mmcblk0<span class="w"> </span><span class="nv">seek</span><span class="o">=</span><span class="m">16384</span><span class="w"> </span><span class="nv">conv</span><span class="o">=</span>notrunc
dd<span class="w"> </span><span class="k">if</span><span class="o">=</span>trust.bin<span class="w"> </span><span class="nv">of</span><span class="o">=</span>/dev/mmcblk0<span class="w"> </span><span class="nv">seek</span><span class="o">=</span><span class="m">24576</span><span class="w"> </span><span class="nv">conv</span><span class="o">=</span>notrunc
sync
</code></pre></div>
<p>Ref:</p>
<ul>
<li><a href="https://forum.armbian.com/topic/15082-rock64-focal-fossa-memory-frequency/?tab=comments#comment-108127">Stability problems</a></li>
</ul>
<h2 id="cluster">Cluster</h2>
<p><code>playbooks/install/cluster.yml</code> to setup Kubernetes.</p>
<div class="highlight"><pre><span></span><code>ansible-playbook<span class="w"> </span>playbooks/install/k8s.yml<span class="w"> </span>--become
</code></pre></div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.indexes", "navigation.expand", "search.highlight", "search.share"], "search": "../../assets/javascripts/workers/search.e5c33ebb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.51d95adb.min.js"></script>
      
    
  </body>
</html>